# EyeOfToga - Doc
## Ideia Principal
 > √â um software que far√° a analise de comportamento do usu√°rio.  Valide a identidade de usu√°rios no momento do login, checkout ou a√ß√µes sensiveis, com o minimo de fric√ß√£o. Coletar dados √∫teis. Gerar score de confian√ßa permitido que o hospedeiro possa agir com base na avalia√ß√£o.

### Valida√ß√£o de Identidade

> Cuida da autentica√ß√£o e do gerenciamento de sess√µes. A autentica√ß√£o pode ser feita internamente, com as credenciais armazenadas localmente, ou externamente, por meio do componente de federa√ß√£o.
 - Podendo suportar at√©:
    - ID exclusivo(UID) e senha;
    - Senha de uso unico(OTP)(e-mail, SMS ou Voz);
    - Senha de uso unico baseada em tempo(TOTP);
    - Codigo QR(Requer modulo de identidade Movel);
    - Notifica√ß√£o Push(Requer o modulo mobile identity);
    - Logout Unico SAML(SLO);
    - Revoga√ß√£o de token.

### Analise de comportamento
> Responsavel por analisar o comportamento dos usuarios e capturar dados como:
    - Device fingerprint (navegador, IP, timezone, resolu√ß√£o, idioma, etc.)
    - Comportamento do usu√°rio (tempo na p√°gina, movimentos do mouse, intera√ß√µes, foco da aba, etc.)
    - Metadados da sess√£o
> Transformar a analise da I.A. em 3 respostas:
    - Allow 
    - Review
    - Deny
> Caso seja um "Deny" - auto:
    - Definir a criticidade da amea√ßa
        # Critical
        # High
        # Medium
        # Low

# OUTPUT - Doc
##

# Data_Collection - Doc
## üîé O que vamos coletar

### 1. Identifica√ß√£o do Dispositivo e Ambiente
- Tipo de dispositivo (servidor f√≠sico, VM, container, desktop, mobile, IoT)
- Modelo e fabricante (via API do SO)
- Sistema Operacional e vers√£o
- Quantidade de mem√≥ria RAM total e dispon√≠vel
- CPU (modelo, n√∫cleos, threads, uso em %)
- Disco (tamanho, espa√ßo livre, uso em %)
- GPU (quando dispon√≠vel)
- Nome do host
- Endere√ßo IP (IPv4/IPv6)
- Endere√ßo MAC (quando permitido)
- Idioma, localiza√ß√£o e timezone do sistema
- Provedor de internet (ASN, ISP)
- Tipo e status da rede (Ethernet, Wi-Fi, LTE, 5G, online/offline, lat√™ncia/jitter)
- Uptime do dispositivo
- Vers√£o do SDK instalado
- Sensores (mobile/IoT: aceler√¥metro, girosc√≥pio, GPS, etc.)
- Navegador e vers√£o (quando aplic√°vel)

---

### 2. Sess√£o, Acesso e Autentica√ß√£o
- ID √∫nico da sess√£o
- Token de autentica√ß√£o (JWT, OAuth, API Key) ‚Äì sempre mascarado/hasheado
- Timestamp de in√≠cio e t√©rmino da sess√£o
- Origem da requisi√ß√£o (URL, rota, referer)
- User Agent completo
- Geolocaliza√ß√£o aproximada (via IP ou GPS)
- M√©todos de login usados (senha, MFA, SSO)
- Resultado da autentica√ß√£o (sucesso, falha, motivo)
- Tentativas de login consecutivas
- Mudan√ßa de credenciais (reset de senha, troca de e-mail, etc.)
- Sess√µes simult√¢neas abertas pelo mesmo usu√°rio
- Expira√ß√£o do token/sess√£o
- Fingerprint do dispositivo (hash √∫nico)

---

### 3. Dados de Uso e Comportamento
- Endpoints/rotas acessados
- Sequ√™ncia de navega√ß√£o e tempo gasto por rota
- Eventos de intera√ß√£o (cliques, formul√°rios, a√ß√µes cr√≠ticas)
- Frequ√™ncia e hor√°rio de acessos
- Erros de requisi√ß√£o (HTTP 4xx, 5xx)
- Padr√µes an√¥malos de uso (repeti√ß√£o de requests, acessos fora do hor√°rio)
- N√∫mero de requisi√ß√µes por minuto
- Taxa de falhas em chamadas de API
- Hist√≥rico de permiss√µes acessadas
- Download/upload de arquivos (nome, tamanho, tipo, hash do arquivo)
- Logs de execu√ß√£o de comandos em servidores (quando aplic√°vel)
- Erros de sistema (exce√ß√µes n√£o tratadas, crash reports)

---

### 4. Seguran√ßa e Compliance
- Tentativas de acesso maliciosas (SQLi, XSS, brute force, etc.)
- Registros de bloqueios de firewall/WAF
- Estado de integridade do dispositivo (root/jailbreak detectado)
- Certificados digitais instalados/validade
- Uso de VPN ou proxy
- Compara√ß√£o contra listas de reputa√ß√£o (IP/ASN maliciosos)
- Estado de criptografia dos discos (BitLocker, LUKS, etc.)
- Logs de auditoria para LGPD/GDPR
- Consentimento de coleta de dados (opt-in/out)

---

### 5. M√©tricas de Performance e Telemetria
- Lat√™ncia m√©dia das chamadas
- Tempo de resposta por endpoint
- Taxa de erro por servi√ßo
- Disponibilidade do sistema (% uptime)
- Consumo de mem√≥ria e CPU da aplica√ß√£o
- M√©tricas de fila (jobs pendentes, tempo de execu√ß√£o)
- Monitoramento de containers (CPU, mem√≥ria, IO, rein√≠cios)
- Eventos de escalonamento autom√°tico (scale in/out)
- Tempo de inicializa√ß√£o do SDK
- Eventos offline/online do cliente
- Logs de falhas na sincroniza√ß√£o

---

### 6. Integra√ß√µes Externas e Servi√ßos
- Chamadas para APIs de terceiros (endpoint, tempo de resposta, status)
- Status de integra√ß√µes (ativo, falho, indispon√≠vel)
- Logs de auditoria de integra√ß√µes
- Depend√™ncias externas do SDK
- Webhooks disparados (payload, resposta)
- Comunica√ß√£o com mensageria (Kafka, RabbitMQ, SQS, etc.)
- Configura√ß√µes recebidas remotamente (feature flags, par√¢metros)

---

### 7. Dados de Neg√≥cio (Customiz√°veis)
*(Definidos pela aplica√ß√£o que usa o SDK ‚Äì exemplos abaixo)*
- Identificador √∫nico do cliente
- Plano/assinatura do usu√°rio
- Fun√ß√µes/pap√©is no sistema (roles)
- Prefer√™ncias do usu√°rio
- Hist√≥rico de compras/transa√ß√µes
- Pontos de engajamento (gamifica√ß√£o, n√≠veis, badges)
- Contexto de uso (mobile app, portal web, API backend)

## Documenta√ß√£o T√©cnica
### 2. Device Info

#### üéØ Finalidade
Coletar informa√ß√µes completas sobre o dispositivo e ambiente de execu√ß√£o para cria√ß√£o de impress√£o digital digital (*fingerprint*) e an√°lise de contexto de seguran√ßa.

#### üì¶ Depend√™ncias
- `requests` - Para requisi√ß√µes HTTP √† API de geolocaliza√ß√£o
- `psutil` - Para informa√ß√µes de sistema e hardware
- `netifaces` - Para dados de interfaces de rede
- `uuid` - Para gerar identificadores √∫nicos
- `platform` - Para informa√ß√µes da plataforma
- `socket` - Para opera√ß√µes de rede
- `locale` - Para informa√ß√µes de localiza√ß√£o
- `datetime` - Para manipula√ß√£o de datas e horas
- `re` - Para express√µes regulares
- `subprocess` - Para execu√ß√£o de comandos do sistema
- `json` - Para manipula√ß√£o de JSON

#### üß© Principais Componentes

**Classe Principal:** `DeviceEnvironmentSDK`

**M√©todos Principais:**
- `detect_device_type()` - Identifica tipo de dispositivo
- `get_memory_info()` - Obt√©m informa√ß√µes de mem√≥ria
- `get_host_info()` - Coleta dados do sistema
- `get_network_info()` - Obt√©m dados de rede
- `collect_all_data()` - Coleta todos os dados

#### üîß Funcionamento

O arquivo implementa uma classe √∫nica (`DeviceEnvironmentSDK`) que:

1. **Inicializa** uma sess√£o HTTP e cache de dados
2. **Detecta** automaticamente o tipo de dispositivo atrav√©s de m√∫ltiplas t√©cnicas
3. **Coleta** informa√ß√µes de hardware, sistema, rede e localiza√ß√£o
4. **Exporta** dados em formatos JSON ou CSV
5. **Gerencia** erros gracefulmente com fallbacks

#### üìä Exemplo de Uso

```python
# Importa√ß√£o e inicializa√ß√£o
from device_info import DeviceEnvironmentSDK

sdk = DeviceEnvironmentSDK()

# Coleta completa de dados
dados_dispositivo = sdk.collect_all_data()
print(f"Tipo de dispositivo: {dados_dispositivo['device_type']}")
print(f"Mem√≥ria total: {dados_dispositivo['memory_info']['total_memory_gb']}GB")

# Exporta√ß√£o para JSON
json_data = sdk.export_data('json')
print(json_data)
```

#### ‚ö†Ô∏è Observa√ß√µes

- **Seguran√ßa:** Endere√ßos MAC e tokens s√£o mascarados
- **Performance:** Opera√ß√µes de rede possuem timeout de 10 segundos
- **Portabilidade:** Funciona em Windows, Linux e macOS
- **Erros:** Todos os m√©todos incluem tratamento de exce√ß√µes

### 3. IP Location

#### üéØ Finalidade
Fornecer uma SDK completa para coleta de dados de geolocaliza√ß√£o por IP, gerenciamento de sess√µes e an√°lise de seguran√ßa. O arquivo implementa um sistema modular com m√∫ltiplos provedores de geolocaliza√ß√£o e funcionalidades avan√ßadas de tracking.

#### üì¶ Depend√™ncias
- `requests` - Para fazer requisi√ß√µes HTTP aos provedores de geolocaliza√ß√£o
- `logging` - Para registro de logs e debug
- `datetime` - Para manipula√ß√£o de datas e timestamps
- `hashlib` - Para gera√ß√£o de hashes de sess√£o
- `enum` - Para defini√ß√£o de enums (m√©todos de auth, resultados)
- `time` - Para opera√ß√µes de tempo e delays
- `abc` - Para definir a interface abstrata dos provedores

#### üß© Principais Componentes

**Classes Principais:**
- `IPLocationSDK` - Classe principal do SDK
- `GeoLocationProviderInterface` - Interface abstrata para provedores
- `GeoLocationData` - Modelo de dados para localiza√ß√£o
- `SessionData` - Gerenciamento de sess√µes
- `AuthenticationData` - Dados de autentica√ß√£o

**Provedores Implementados:**
- `IPInfoProvider` - Provedor IPInfo.io
- `IPAPIProvider` - Provedor IP-API.com  
- `MockGeoProvider` - Provedor mock para testes

**Enums:**
- `AuthMethod` - M√©todos de autentica√ß√£o (PASSWORD, MFA, SSO, etc.)
- `AuthResult` - Resultados de autentica√ß√£o (SUCCESS, FAILED, etc.)

#### üîß Funcionamento

O SDK funciona atrav√©s de um sistema de provedores m√∫ltiplos:

1. **Inicializa√ß√£o**: Cria inst√¢ncia com provedores padr√£o
2. **Geolocaliza√ß√£o**: Tenta provedores em ordem at√© obter sucesso
3. **Sess√µes**: Gerencia ciclo de vida das sess√µes de usu√°rio
4. **Autentica√ß√£o**: Registra e analisa tentativas de login
5. **An√°lise de Risco**: Combina dados para calcular risco de seguran√ßa
6. **Relat√≥rios**: Gera reports completos com todos os dados

#### üìä Exemplo de Uso

```python
# Importar e inicializar SDK
from iplocation import IPLocationSDK, AuthMethod, AuthResult

sdk = IPLocationSDK()

# Obter localiza√ß√£o de IP
location = sdk.get_ip_location("8.8.8.8")
print(f"Pa√≠s: {location.country}, Cidade: {location.city}")

# Gerenciar sess√£o
session = sdk.create_session("sessao_123")
sdk.update_session_activity("sessao_123")

# Registrar autentica√ß√£o
auth_data = AuthenticationData()
auth_data.username = "usuario_teste"
auth_data.auth_method = AuthMethod.PASSWORD
auth_data.auth_result = AuthResult.SUCCESS
sdk.record_auth_attempt(auth_data)

# Gerar relat√≥rio completo
report = sdk.generate_comprehensive_report("8.8.8.8", "sessao_123")
print(f"N√≠vel de risco: {report['security_analysis']['risk_level']}")
```

#### ‚ö†Ô∏è Observa√ß√µes

- **Fallback Autom√°tico**: Se um provedor falhar, tenta o pr√≥ximo automaticamente
- **Thread-Safe**: Adequado para uso em ambientes multi-thread
- **Extens√≠vel**: F√°cil adicionar novos provedores via interface
- **Logs Detalhados**: Logging completo para debug e auditoria
- **Mock Included**: Provedor mock para desenvolvimento e testes
- **Tratamento de Erros**: Robustecido contra falhas de rede e provedores

#### üîÑ Fluxo de Dados

```
IP Address ‚Üí Provedores de Geo ‚Üí Location Data ‚Üí Session Tracking ‚Üí 
Auth Tracking ‚Üí Risk Analysis ‚Üí Comprehensive Report
```

O arquivo √© totalmente auto-contido e pode ser usado independentemente ou integrado com outros m√≥dulos do sistema de seguran√ßa.

### 4. Session Behavior

#### üéØ Finalidade
Monitorar e analisar o comportamento de usu√°rios em tempo real, rastreando eventos de intera√ß√£o, requisi√ß√µes HTTP e padr√µes de uso para detec√ß√£o de anomalias e melhoria da experi√™ncia do usu√°rio.

#### üì¶ Depend√™ncias
- `dataclasses` - Para defini√ß√£o de estruturas de dados
- `threading` - Para opera√ß√µes thread-safe
- `statistics` - Para c√°lculos estat√≠sticos
- `collections` - Para estruturas de dados otimizadas (defaultdict, deque)
- `uuid` - Para gera√ß√£o de IDs √∫nicos
- `logging` - Para registro de logs
- `json` - Para serializa√ß√£o de dados
- `time` - Para medi√ß√£o de tempo
- `datetime` - Para manipula√ß√£o de datas e horas
- `enum` - Para defini√ß√£o de enums
- `functools` - Para decorators

#### üß© Principais Componentes

**Classes Principais:**
- `SessionBehaviorSDK` - Classe principal do SDK
- `UserBehaviorAnalyzer` - Analisador de comportamento do usu√°rio
- `EndpointMonitor` - Monitor de endpoints e performance
- `RealTimeEventProcessor` - Processador de eventos em tempo real

**Estruturas de Dados:**
- `UserEvent` - Modelo para eventos de usu√°rio (cliques, scroll, etc.)
- `RequestEvent` - Modelo para eventos de requisi√ß√£o HTTP
- `EndpointMetrics` - M√©tricas de performance de endpoints

**Enums:**
- `EventType` - Tipos de eventos (CLICK, SCROLL, FORM_SUBMIT, etc.)
- `HTTPMethod` - M√©todos HTTP (GET, POST, PUT, etc.)
- `RequestStatus` - Status das requisi√ß√µes (SUCCESS, ERROR, TIMEOUT)

#### üîß Funcionamento

O SDK opera em tr√™s camadas principais:

1. **Coleta de Dados**: 
   - Rastreia eventos de UI via m√©todos `track_click()`, `track_scroll()`, etc.
   - Monitora requisi√ß√µes HTTP via `track_request()`
   - Usa decorator `@request_timing_decorator` para timing autom√°tico

2. **An√°lise em Tempo Real**:
   - Calcula m√©tricas de performance (RPM, tempo de resposta)
   - Identifica padr√µes de comportamento (hotspots de clique, tempo ocioso)
   - Detecta anomalias e gera alertas

3. **Relat√≥rios e Insights**:
   - Gera an√°lises de sess√£o detalhadas
   - Produz relat√≥rios de performance de endpoints
   - Fornece m√©tricas em tempo real

#### üìä Exemplo de Uso

```python
from session_behavior import SessionBehaviorSDK, EventType, HTTPMethod

# Inicializar SDK
sdk = SessionBehaviorSDK()

# Registrar handlers de eventos
def click_handler(event):
    print(f"Clique detectado em: {event.element_id}")
    
sdk.register_event_handler(EventType.CLICK, click_handler)

# Rastrear eventos de usu√°rio
session_id = "user_123"
sdk.track_click(session_id, "btn-submit", {"x": 100, "y": 200}, "/checkout")
sdk.track_scroll(session_id, {"x": 0, "y": 500}, "/product")

# Rastrear requisi√ß√µes HTTP
sdk.track_request(
    session_id=session_id,
    endpoint="/api/order",
    method=HTTPMethod.POST,
    status_code=201,
    response_time_ms=150.2
)

# Usar decorator para timing autom√°tico
@sdk.request_timing_decorator("/api/data", HTTPMethod.GET)
def get_data():
    return {"data": "example"}

# Gerar relat√≥rios
analysis = sdk.get_session_behavior_analysis(session_id)
performance = sdk.get_endpoint_performance_report()
```

#### ‚ö†Ô∏è Observa√ß√µes

- **Thread-Safe**: Todas as opera√ß√µes s√£o protegidas contra acesso concorrente
- **Baixo Overhead**: Otimizado para alto desempenho em produ√ß√£o
- **Extens√≠vel**: F√°cil adicionar novos tipos de eventos e analisadores
- **Alertas em Tempo Real**: Detecta automaticamente comportamentos suspeitos
- **M√∫ltiplas Sess√µes**: Suporte a tracking concorrente de v√°rias sess√µes
- **Limpeza Autom√°tica**: Remove dados antigos automaticamente

#### üîÑ Fluxo de Dados

```
Eventos de UI ‚Üí UserBehaviorAnalyzer ‚Üí An√°lise de Padr√µes
Requisi√ß√µes HTTP ‚Üí EndpointMonitor ‚Üí M√©tricas de Performance
           ‚Üò
        SessionBehaviorSDK ‚Üí Relat√≥rios Consolidados ‚Üí Alertas
```

#### üé® Funcionalidades Avan√ßadas

1. **Hotspot Detection**: Identifica √°reas mais clicadas na interface
2. **Idle Time Analysis**: Calcula tempos de inatividade do usu√°rio
3. **Rate Limiting**: Monitora taxa de requisi√ß√µes por sess√£o
4. **Custom Events**: Suporte a eventos personalizados
5. **Real-time Alerts**: Gera alertas para comportamentos an√¥malos
6. **Performance Decorator**: Decorator autom√°tico para timing de fun√ß√µes

### 5. Storage Adapter

#### üéØ Finalidade
Fornecer uma camada de abstra√ß√£o unificada para opera√ß√µes de armazenamento, permitindo trocar entre diferentes provedores (SQLite, Redis, PostgreSQL, MongoDB, Mem√≥ria) sem alterar o c√≥digo da aplica√ß√£o. Gerencia automaticamente serializa√ß√£o, seguran√ßa, caching e fallbacks com foco em compliance e performance.

#### üì¶ Depend√™ncias
- `redis` - Para conex√£o com Redis
- `psycopg2-binary` - Para PostgreSQL (opcional)
- `pymongo` - Para MongoDB (opcional)
- `cryptography` - Para criptografia e assinaturas digitais
- `psutil` - Para monitoramento de recursos do sistema
- `dataclasses` - Para estruturas de dados tipadas
- `logging` - Para registro de logs estruturados
- `threading` - Para opera√ß√µes thread-safe

#### üß© Principais Componentes

##### üìä Estruturas de Dados (Data Classes)
- `SecurityData` - Dados de seguran√ßa, integridade e auditoria
- `PerformanceData` - Telemetria, m√©tricas e monitoramento
- `ApplicationData` - Configura√ß√£o e ambiente da aplica√ß√£o  
- `TransactionData` - Transa√ß√µes financeiras e neg√≥cio
- `AntiFraudData` - Detec√ß√£o e preven√ß√£o de fraudes

##### üíæ Interfaces de Armazenamento
- `StorageInterface` - Interface abstrata com todos os m√©todos obrigat√≥rios
- `MemoryStorage` - Armazenamento vol√°til em mem√≥ria (dev/test)
- `SQLiteStorage` - Banco embutido com suporte a SQL
- `RedisStorage` - Cache distribu√≠do de alta performance
- `PostgreSQLStorage` - Banco relacional transacional
- `MongoDBStorage` - Banco NoSQL orientado a documentos

##### üéØ Enums e Tipos
- `StorageType` - Tipos de armazenamento suportados
- `TransactionStatus` - Status do ciclo de vida de transa√ß√µes
- `PaymentMethod` - M√©todos de pagamento suportados
- `SecurityLevel` - N√≠veis cr√≠ticos de seguran√ßa

#### üîß Funcionamento

##### Arquitetura em Camadas
O adapter implementa um padr√£o **Strategy** + **Factory**:

```
Aplica√ß√£o ‚Üí StorageAdapter ‚Üí [Memory, SQLite, Redis, PostgreSQL, MongoDB]
```

##### Fluxo de Opera√ß√£o
1. **Inicializa√ß√£o**: Configura√ß√£o do provedor via factory method
2. **Conex√£o**: Estabelecimento de conex√£o com valida√ß√£o
3. **Opera√ß√£o**: CRUD com serializa√ß√£o/criptografia autom√°tica
4. **Monitoramento**: Coleta de m√©tricas de performance
5. **Fallback**: Troca autom√°tica em caso de falhas

#### üìä Exemplo de Uso

```python
from storage_adapter import StorageAdapter, StorageType, SecurityData

# Inicializa√ß√£o com Redis
storage = StorageAdapter.create(StorageType.REDIS, {
    'host': 'localhost',
    'port': 6379,
    'password': 'secret'
})

# Conex√£o autom√°tica
storage.connect()

# Armazenar dados de seguran√ßa
security_data = SecurityData(
    session_id="sess_123",
    payload_hash_sha256="abc123...",
    unauthorized_attempts=3
)

storage.store_data(
    key="security:sess_123",
    data=security_data.to_dict(),
    ttl=3600  # 1 hora
)

# Recuperar dados
data = storage.retrieve_data("security:sess_123")
print(f"Tentativas n√£o autorizadas: {data['unauthorized_attempts']}")

# Health check
status = storage.health_check()
print(f"Status: {status['status']}, Lat√™ncia: {status['latency_ms']}ms")
```

#### ‚ö†Ô∏è Observa√ß√µes

##### üîí Seguran√ßa
- **Criptografia**: Dados sens√≠veis criptografados em repouso
- **Mascaramento**: Logs com dados sens√≠veis mascarados
- **Valida√ß√£o**: Assinaturas digitais para integridade
- **TTL**: Expira√ß√£o autom√°tica de dados tempor√°rios

##### ‚ö° Performance  
- **Connection Pooling**: Reuso de conex√µes para baixa lat√™ncia
- **Batch Operations**: Opera√ß√µes em lote para grandes volumes
- **Compression**: Compacta√ß√£o autom√°tica de grandes dados
- **Caching**: Camada de cache integrada para consultas frequentes

##### üîÑ Resiliencia
- **Retry Autom√°tico**: Tentativas em caso de falhas transit√≥rias
- **Fallback**: Altern√¢ncia entre provedores secund√°rios
- **Circuit Breaker**: Preven√ß√£o de cascata de falhas
- **Timeout**: Opera√ß√µes com timeout configur√°vel

##### üìã Compliance
- **Auditoria**: Logs detalhados de todas as opera√ß√µes
- **RGPD/LGPD**: Suporte a direito ao esquecimento
- **Reten√ß√£o**: Pol√≠ticas de reten√ß√£o configur√°veis
- **Backup**: Integra√ß√£o com sistemas de backup

#### üöÄ Implementa√ß√µes Espec√≠ficas

##### Redis Storage
```python
# Configura√ß√£o otimizada para Redis
redis_config = {
    'host': 'redis-cluster.example.com',
    'port': 6379,
    'password': 'secret',
    'ssl': True,
    'ssl_cert_reqs': 'required',
    'retry_on_timeout': True,
    'max_connections': 100
}
```

##### PostgreSQL Storage  
```python
# Configura√ß√£o para PostgreSQL com pooling
postgres_config = {
    'host': 'postgres-primary.example.com',
    'port': 5432,
    'database': 'app_db',
    'user': 'app_user',
    'password': 'secret',
    'sslmode': 'verify-full',
    'pool_size': 20
}
```

#### üîç M√©tricas Coletadas

##### Performance Metrics
- `operation_latency_ms` - Tempo das opera√ß√µes
- `connection_pool_size` - Tamanho do pool de conex√µes
- `cache_hit_rate` - Taxa de acerto do cache
- `error_rate` - Taxa de erros por opera√ß√£o

##### Security Metrics
- `encryption_time_ms` - Tempo de criptografia
- `integrity_checks` - Verifica√ß√µes de integridade
- `access_violations` - Tentativas de acesso n√£o autorizado

##### Business Metrics
- `storage_cost_per_gb` - Custo de armazenamento
- `data_retention_days` - Dias de reten√ß√£o
- `backup_frequency` - Frequ√™ncia de backups

# Biometrics - DOC
## üîÑ Fluxo Principal do Processamento Biom√©trico

### Diagrama de Fluxo Simplificado

```
Captura de Imagem ‚Üí Pr√©-processamento ‚Üí Valida√ß√£o de Qualidade ‚Üí 
Sele√ß√£o do Provedor ‚Üí Compara√ß√£o Facial ‚Üí An√°lise de Resultados ‚Üí 
Armazenamento e Logging ‚Üí Retorno da Resposta
```

## üè¢ Provedores de Biometria Suportados

### Tabela Comparativa de Provedores

| Provedor              | Tipo       | Precis√£o     | Lat√™ncia   | Custo    | Melhor Para         |
|-----------------------|------------|--------------|------------|----------|---------------------|
| **AWS Rekognition**   | Cloud      | 99.9%        | 200-500ms  | Por uso  | Produ√ß√£o enterprise |
| **Local Recognition** | On-premise | 95-98%       | 500-2000ms | Hardware | Ambientes offline   |
| **Mock Provider**     | Simula√ß√£o  | Configur√°vel | 0-100ms    | Zero     | Desenvolvimento     |

### Crit√©rios de Sele√ß√£o Autom√°tica

| Condi√ß√£o                            | Provedor Escolhido | Motivo                  |
|-------------------------------------|--------------------|-------------------------|
| Internet dispon√≠vel + Alta precis√£o | AWS Rekognition    | M√°xima acur√°cia         |
| Internet indispon√≠vel               | Local Recognition  | Funcionamento offline   |
| Modo desenvolvimento                | Mock Provider      | Resultados controlados  |
| Baixa lat√™ncia requerida            | AWS Rekognition    | Performance superior    |
| Alta privacidade requerida          | Local Recognition  | Dados n√£o saem do local |

## üéØ Processo de Valida√ß√£o Biom√©trica

### Etapas de Valida√ß√£o T√©cnica

| Etapa                   | Descri√ß√£o                     | Crit√©rios de Aceita√ß√£o            |
|-------------------------|-------------------------------|-----------------------------------|
| **Valida√ß√£o de Imagem** | Verifica formato e qualidade  | Formato JPG/PNG, tamanho 50KB-5MB |
| **Detec√ß√£o Facial**     | Identifica rostos na imagem   | Exatamente 1 rosto detectado      |
| **Qualidade da Imagem** | Analisa condi√ß√µes t√©cnicas    | Brilho 40-220, nitidez >500       | 
| **Pr√©-processamento**   | Prepara imagem para an√°lise   | Alinhamento, normaliza√ß√£o         |
| **Compara√ß√£o Facial**   | Executa algoritmo de matching | Score > threshold configurado     |

### Thresholds de Seguran√ßa por Cen√°rio

| N√≠vel de Seguran√ßa | Similaridade M√≠nima | Confian√ßa M√≠nima | Aplica√ß√£o T√≠pica       |
|--------------------|---------------------|------------------|------------------------|
| **Cr√≠tico**        | 90%                 | 95%              | Transa√ß√µes financeiras |
| **Alto**           | 85%                 | 90%              | Acesso administrativo  |
| **M√©dio**          | 75%                 | 80%              | Login de usu√°rio       |
| **Baixo**          | 65%                 | 70%              | Recupera√ß√£o de conta   |

## üìä Destino dos Dados Coletados

### Estrutura de Armazenamento

| Tipo de Dado               | Destino Principal  | Destino Secund√°rio | Per√≠odo de Reten√ß√£o      |
|----------------------------|--------------------|--------------------|--------------------------|
| **Imagens brutas**         | Azure Blob Storage | -                  | 7 dias (criptografadas)  |
| **Resultados verifica√ß√£o** | AWS S3             | Redis Cache        | 365 dias                 |
| **Logs de auditoria**      | Elasticsearch      | -                  | 2 anos                   |
| **M√©tricas performance**   | Snowflake          | Kafka Stream       | Indefinido (anonimizado) |
| **Eventos tempo real**     | Kafka              | Webhooks           | 30 dias                  |

### Exemplo de Payload para Data Collection

```json
{
  "timestamp": "2024-01-15T10:30:00Z",
  "session_id": "sess_abc123",
  "provider": "aws_rekognition",
  "result": {
    "similarity_score": 0.92,
    "is_match": true,
    "confidence": 0.98
  },
  "image_metrics": {
    "quality_score": 0.88,
    "face_count": 1
  }
}
```

## ‚öôÔ∏è Configura√ß√µes de Performance

### Estrat√©gias de Otimiza√ß√£o

| Otimiza√ß√£o                | AWS Rekognition | Local Recognition | Mock Provider |
|---------------------------|---------------  |-------------------|---------------|
| **Processamento em lote** | ‚úÖ Suportado    | ‚ùå N√£o suportado | ‚úÖ Simulado  |
| **Cache de resultados**   | 1 hora          | 24 horas          | 5 minutos     |
| **Conex√µes paralelas**    | 10 conex√µes     | 4 threads         | Ilimitado     |
| **Compress√£o**            | ‚úÖ Ativado      | ‚ùå Desativado    | ‚úÖ N/A       |

## üîí Pol√≠ticas de Seguran√ßa

### Medidas de Prote√ß√£o por Camada

| Camada            | Medidas de Seguran√ßa                 | Compliance |
|-------------------|--------------------------------------|------------|
| **Rede**          | TLS 1.3, VPN, Firewall               | ISO 27001  |
| **Armazenamento** | AES-256-GCM, Criptografia em repouso | LGPD, GDPR |
| **Processamento** | Dados anonimizados, Logs mascarados  | PDPA, CCPA |
| **Acesso**        | MFA, Rota√ß√£o de chaves, Audit trails | SOC 2      |

### Pol√≠tica de Reten√ß√£o e Privacidade

| Tipo de Dado            | Per√≠odo Reten√ß√£o | Anonimiza√ß√£o     | Direito ao Esquecimento |
|-------------------------|------------------|------------------|-------------------------|
| Dados biom√©tricos crus  | 7 dias           | ‚úÖ Completa     | ‚úÖ Imediato             |
| Metadados processamento | 1 ano            | ‚úÖ Parcial      | ‚úÖ 30 dias              |
| Logs de auditoria       | 2 anos           | ‚úÖ Mascaramento | ‚ùå Regulamentado        |
| Dados analytics         | Indefinido       | ‚úÖ Total        | ‚úÖ Implementado         |

## üìà Monitoramento e M√©tricas

### Principais Indicadores de Performance (KPI)

| M√©trica                   | Limite Aceit√°vel | Limite Cr√≠tico | A√ß√£o               |
|---------------------------|------------------|----------------|--------------------|
| Taxa de falso positivo    | < 1%             | > 2%           | Revisar thresholds |
| Tempo m√©dio processamento | < 800ms          | > 2000ms       | Otimizar provedor  |
| Disponibilidade provedor  | > 99.5%          | < 95%          | Ativar fallback    |
| Qualidade m√©dia imagem    | > 0.7            | < 0.4          | Melhorar captura   |

### Sistema de Alertas

| Severidade  | Condi√ß√£o                   | A√ß√£o Imediata                      |
|-------------|----------------------------|------------------------------------|
| **Cr√≠tico** | FAR > 2%                   | Bloquear sistema, notificar equipe |
| **Alto**    | Provedor principal offline | Ativar fallback autom√°tico         |
| **M√©dio**   | Lat√™ncia > 1500ms          | Escalar para an√°lise               |
| **Baixo**   | Qualidade imagem < 0.5     | Logar para melhoria                |

## üöÄ Estrat√©gia de Implanta√ß√£o

### Fases de Rollout

| Fase                    | Provedores         | Tr√°fego | Ambientes  | Dura√ß√£o   |
|-------------------------|--------------------|---------|------------|-----------|
| **1 - Desenvolvimento** | Mock               | 100%    | Dev, Test  | 2 semanas |
| **2 - Staging**         | Mock + Local       | 50%/50% | Staging    | 1 semana  |
| **3 - Pr√©-produ√ß√£o**    | AWS + Local        | 25%/75% | Preprod    | 1 semana  |
| **4 - Produ√ß√£o**        | AWS + Local + Mock | 100%    | Production | Cont√≠nuo  |

### Health Checks Implementados

| Check            | Frequ√™ncia  | Timeout | A√ß√£o em Falha       |
|------------------|-------------|---------|---------------------|  
| Conex√£o AWS      | 30 segundos | 10s     | Fallback para local |
| Modelo local     | 60 segundos | 15s     | Restart service     |
| Qualidade imagem | Por request | 5s      | Rejeitar imagem     |
| Storage          | 5 minutos   | 30s     | Alertar equipe      |

## üí° Melhores Pr√°ticas Recomendadas

### Para Implementa√ß√£o
1. **Sempre usar modo "auto"** para sele√ß√£o autom√°tica de provedor
2. **Configurar fallbacks** em ordem: AWS ‚Üí Local ‚Üí Mock
3. **Implementar circuit breaker** para provedores externos
4. **Validar qualidade de imagem** antes do processamento

### Para Monitoramento
1. **Monitorar FAR/FRR** semanalmente
2. **Ajustar thresholds** baseado em dados reais
3. **Manter modelos locais** atualizados
4. **Revisar logs de auditoria** diariamente

### Para Seguran√ßa
1. **Nunca armazenar** imagens brutas por mais de 7 dias
2. **Implementar criptografia** end-to-end
3. **Validar compliance** regularmente
4. **Realizar pentests** trimestralmente

# Achitecture - DOC
## Back-end
CHALLENGE_TOP_ONE/                    .............................................# raiz do reposit√≥rio <br>
‚îÇ<br>
‚îú‚îÄ‚îÄ eyeoftoga_back/                  .............................................# pacote principal do SDK ( c√≥digo fonte )<br>
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               .............................................# exporta classes p√∫blicas, __version__<br>
‚îÇ   ‚îú‚îÄ‚îÄ __main__.py               .............................................# entrypoint para `python -m nexshop_sdk` (CLI)<br>
‚îÇ   ‚îú‚îÄ‚îÄ core.py                   .............................................# orquestrador - interface p√∫blica do SDK<br>
‚îÇ   ‚îú‚îÄ‚îÄ config.py                 .............................................# configura√ß√£o: carregamento de env, arquivos, defaults<br>
‚îÇ   ‚îú‚îÄ‚îÄ logging_config.py         .............................................# configura√ß√£o central de logging (struct log)<br>
‚îÇ   ‚îú‚îÄ‚îÄ utils.py                  .............................................# helpers gen√©ricos (serializa√ß√£o, validators)<br>
‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py             .............................................# exce√ß√µes espec√≠ficas do SDK<br>
‚îÇ   ‚îú‚îÄ‚îÄ types.py                  .............................................# dataclasses / pydantic models (UserData, DeviceInfo, ScoreResult)<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ api/                      .............................................# adaptadores / middleware para frameworks web<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fastapi_adapter.py    .............................................# fun√ß√µes para integrar com FastAPI (depend√™ncias, endpoints)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ flask_adapter.py      .............................................# blueprint/handlers para Flask<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ django_adapter.py     .............................................# hooks / middleware para Django<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ data_collection/          .............................................# coleta de dados (apenas backend-side hooks)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ device_info.py        .............................................# parser de user-agent, browser, OS, fingerprint server-side<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ip_location.py        .............................................# IP -> geolocaliza√ß√£o (abstra√ß√£o / provider interface)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session_behavior.py   .............................................# endpoints/handlers para eventos (click, scroll, timing)<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage_adapter.py    .............................................# abstra√ß√£o para persist√™ncia tempor√°ria (cache/db)<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ biometrics/               .............................................# biometria backend (captura/valida√ß√£o delegada)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ face_capture.py       .............................................# helpers para receber/validar imagens (base64/bytes)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ face_validation.py    .............................................# wrapper para modelos/servi√ßos de verifica√ß√£o facial<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ providers/            .............................................# adaptadores para diferentes providers (local / cloud)<br>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mock_provider.py<br>
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ aws_rekognition.py<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ score_engine/              .............................................# c√°lculo do score e regras<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scoring.py            .............................................# fun√ß√£o principal calcular_score(dados) -> ScoreResult<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features.py           .............................................# extratores de features (device_risk, behavior_risk, geo_risk, bio_risk)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rules.py              .............................................# regras fixas / thresholds e pipeline de decis√£o<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ explainability.py     .............................................# gerar raz√µes/atribui√ß√µes (why score = X)<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ integrations/             .............................................# adaptadores para sistemas/fluxos externos<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ecommerce_mock.py     .............................................# simula fluxo de checkout/login para testes<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ webhook_sender.py     .............................................# enviar webhook para sistemas que consomem o resultado<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adapters/             .............................................# adapters para plataformas reais (Shopify, Magento, Woo)<br>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ shopify_adapter.py<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ output/                   .............................................# formata√ß√£o/serializa√ß√£o da sa√≠da (backend "page")<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ score_output.py       .............................................# monta ScoreResult (dict / JSON) com detalhes + reasons<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events.py             .............................................# eventos internos (Audit log, Decisions)<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ policies.py           .............................................# a√ß√µes recomendadas (allow, step-up, block) e payloads<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ persistence/              .............................................# interfaces para armazenamento (opcional)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache.py              .............................................# interface Redis / in-memory<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db_adapter.py         .............................................# interface para RDBMS / timeseries / data lake<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ telemetry/                .............................................# m√©tricas, tracing e health checks<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics.py            .............................................# contadores / histogram (Prometheus)<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tracing.py            .............................................# hooks de tracing (opentelemetry)<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îî‚îÄ‚îÄ tests_support/            .............................................# utilit√°rios para testes (mocks, fixtures)<br>
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ       ‚îî‚îÄ‚îÄ fixtures.py<br>
‚îÇ
‚îú‚îÄ‚îÄ examples/                     .............................................# exemplos de integra√ß√£o backend-only<br>
‚îÇ   ‚îú‚îÄ‚îÄ exemplo_login.py          .............................................# exemplo de chamada em login<br>
‚îÇ   ‚îú‚îÄ‚îÄ exemplo_checkout.py       .............................................# exemplo de chamada no checkout<br>
‚îÇ   ‚îî‚îÄ‚îÄ run_simulation.py         .............................................# simula fluxo completo (coleta -> scoring -> webhook)<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ tests/                         .............................................# testes unit√°rios / integra√ß√£o<br>
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ test_scoring.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ test_data_collection.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ test_biometrics.py<br>
‚îÇ   ‚îî‚îÄ‚îÄ test_output.py<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ docs/                          .............................................# Documenta√ß√£o <br>
‚îÇ   ‚îú‚îÄ‚îÄ API.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Architeture.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Biometrics.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Data_Collection.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ EyeOfToga_SDK.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Integrations.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Output.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Percistence.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Scoring.md<br>
‚îÇ   ‚îú‚îÄ‚îÄ Scripts.md<br>
‚îÇ   ‚îî‚îÄ‚îÄ Telemetrt.md<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ scripts/                      .............................................# scripts √∫teis (dev, build, lint)<br>
‚îÇ   ‚îú‚îÄ‚îÄ run_local.sh<br>
‚îÇ   ‚îî‚îÄ‚îÄ generate_api_stub.sh<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ .github/                       .............................................# CI / templates<br>
‚îÇ   ‚îî‚îÄ‚îÄ workflows/<br>
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ Dockerfile                     .............................................# containeriza√ß√£o do SDK para testes/execu√ß√£o<br>
‚îú‚îÄ‚îÄ pyproject.toml                 .............................................# build system / depend√™ncias (prefer√≠vel moderno)<br>
‚îú‚îÄ‚îÄ setup.cfg / setup.py           .............................................# empacotamento (opcional)<br>
‚îú‚îÄ‚îÄ requirements.txt               .............................................# depend√™ncias (se n√£o usar pyproject)<br>
‚îú‚îÄ‚îÄ README.md<br>
‚îî‚îÄ‚îÄ LICENSE<br>
## Front-end
src/<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ front/<br>
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_screen.dart         # Explica√ß√£o: Tela inicial com KPIs, gr√°ficos e vis√£o geral dos eventos<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_controller.dart     # Explica√ß√£o: L√≥gica para buscar dados do backend e atualizar a tela<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ widgets/<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metric_card.dart          # Explica√ß√£o: Card visual para exibir m√©tricas r√°pidas (ex: bloqueios hoje)<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activity_graph.dart       # Explica√ß√£o: Gr√°fico mostrando evolu√ß√£o de eventos ao longo do tempo<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_table.dart           # Explica√ß√£o: Tabela com usu√°rios bloqueados, status e filtros<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ real_time_log.dart        # Explica√ß√£o: Lista de eventos atualizada em tempo real<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ setup/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wizard_screen.dart            # Explica√ß√£o: Assistente passo a passo para configura√ß√£o inicial do sistema<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage_settings.dart         # Explica√ß√£o: Configura√ß√£o de armazenamento (Local, Cloud, Reten√ß√£o de dados)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ module_settings.dart          # Explica√ß√£o: Escolha dos m√≥dulos ativos (biometria, an√°lise de comportamento, etc.)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration_settings.dart     # Explica√ß√£o: Configura√ß√£o de integra√ß√µes externas (SIEM, SOAR, IAM, Webhooks)<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ confirmation_screen.dart      # Explica√ß√£o: Resumo final antes de aplicar as configura√ß√µes<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ auth/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login_screen.dart             # Explica√ß√£o: Tela de login para administradores<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register_screen.dart          # Explica√ß√£o: Tela para cadastro de novos administradores<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ forgot_password.dart          # Explica√ß√£o: Tela para recupera√ß√£o de senha via e-mail ou OTP<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ reports/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports_screen.dart           # Explica√ß√£o: Lista e visualiza√ß√£o de relat√≥rios filtrados<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export_options.dart           # Explica√ß√£o: Op√ß√µes para exportar relat√≥rios (CSV, PDF, JSON)<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ real_time_monitor_screen.dart # Explica√ß√£o: Tela com monitoramento ao vivo dos eventos de seguran√ßa<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ event_details_modal.dart      # Explica√ß√£o: Modal com detalhes completos de um evento<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îú‚îÄ‚îÄ settings/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ general_settings.dart         # Explica√ß√£o: Configura√ß√µes gerais (idioma, tema, fuso hor√°rio)<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security_settings.dart        # Explica√ß√£o: Ajuste de thresholds, n√≠veis de bloqueio e tempo de sess√£o<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ permissions_settings.dart     # Explica√ß√£o: Gerenciamento de usu√°rios e permiss√µes<br>
‚îÇ   ‚îÇ<br>
‚îÇ   ‚îî‚îÄ‚îÄ shared/<br>
‚îÇ       ‚îú‚îÄ‚îÄ styles.dart                   # Explica√ß√£o: Defini√ß√£o de temas, cores, tipografia e espa√ßamentos<br>
‚îÇ       ‚îú‚îÄ‚îÄ constants.dart                # Explica√ß√£o: Vari√°veis fixas, chaves de API e URLs base<br>  
‚îÇ       ‚îî‚îÄ‚îÄ widgets/<br>
‚îÇ           ‚îú‚îÄ‚îÄ custom_button.dart        # Explica√ß√£o: Bot√£o padronizado do sistema<br>
‚îÇ           ‚îú‚îÄ‚îÄ custom_input_field.dart   # Explica√ß√£o: Campo de texto padronizado do sistema<br>
‚îÇ           ‚îî‚îÄ‚îÄ page_header.dart          # Explica√ß√£o: Cabe√ßalho de p√°ginas com t√≠tulo e breadcrumbs<br>

# API - DOC
## üîê Auth.py

### üéØ Finalidade
Fornecer servi√ßos de autentica√ß√£o e autoriza√ß√£o para o SDK EyeOfToga, incluindo valida√ß√£o de tokens JWT, gerenciamento de permiss√µes e controle de acesso baseado em roles.

### üì¶ Depend√™ncias
- `jose` - Para valida√ß√£o e decodifica√ß√£o de tokens JWT
- `datetime` - Para manipula√ß√£o de datas e expira√ß√£o de tokens
- `cryptography` - Para opera√ß√µes criptogr√°ficas avan√ßadas
- `logging` - Para registro de logs de seguran√ßa
- `typing` - Para type hints e defini√ß√£o de tipos

### üß© Principais Componentes

**Classes Principais:**
- `AuthManager` - Gerenciador central de autentica√ß√£o
- `TokenValidator` - Validador de tokens JWT
- `PermissionService` - Servi√ßo de gerenciamento de permiss√µes

**Estruturas de Dados:**
- `UserClaims` - Claims do usu√°rio extra√≠dos do token
- `AuthConfig` - Configura√ß√£o de autentica√ß√£o
- `AccessPolicy` - Pol√≠ticas de acesso baseadas em roles

### üîß Funcionamento

O m√≥dulo implementa um sistema completo de autentica√ß√£o:

1. **Valida√ß√£o de Token**: Verifica assinatura, expira√ß√£o e claims
2. **Extra√ß√£o de Claims**: Extrai informa√ß√µes do usu√°rio do token JWT
3. **Verifica√ß√£o de Permiss√µes**: Valida se usu√°rio tem acesso ao recurso
4. **Logs de Seguran√ßa**: Registra tentativas de acesso bem-sucedidas e falhas

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.auth import AuthManager, UserClaims

# Inicializar gerenciador de autentica√ß√£o
auth_manager = AuthManager()

# Validar token JWT
try:
    user_claims: UserClaims = auth_manager.validate_token("jwt_token_here")
    print(f"Usu√°rio autenticado: {user_claims.username}")
except Exception as e:
    print(f"Falha na autentica√ß√£o: {e}")

# Verificar permiss√µes
if auth_manager.has_permission(user_claims, "biometrics:read"):
    print("Usu√°rio tem permiss√£o para leitura biom√©trica")
```

### ‚ö†Ô∏è Observa√ß√µes

- **Seguran√ßa**: Utiliza algoritmos criptogr√°ficos robustos para valida√ß√£o
- **Performance**: Cache de chaves p√∫blicas para melhor performance
- **Extens√≠vel**: Suporte a m√∫ltiplos provedores de identidade
- **Logs Detalhados**: Auditoria completa de acesso

---

## ü§ñ Biometrics.py

### üéØ Finalidade
M√≥dulo principal para integra√ß√£o e orquestra√ß√£o dos servi√ßos biom√©tricos do EyeOfToga, proporcionando uma interface unificada para captura, valida√ß√£o e verifica√ß√£o facial.

### üì¶ Depend√™ncias
- `numpy` - Para manipula√ß√£o de arrays e opera√ß√µes matem√°ticas
- `PIL` - Para processamento b√°sico de imagens
- `base64` - Para codifica√ß√£o/decodifica√ß√£o de imagens
- `typing` - Para type hints e defini√ß√£o de tipos
- `logging` - Para registro de logs de opera√ß√µes biom√©tricas

### üß© Principais Componentes

**Classes Principais:**
- `BiometricService` - Servi√ßo principal de biometria
- `FaceAnalyzer` - Analisador de caracter√≠sticas faciais
- `QualityChecker` - Verificador de qualidade de imagens

**Estruturas de Dados:**
- `BiometricConfig` - Configura√ß√£o do servi√ßo biom√©trico
- `FaceDetectionResult` - Resultado da detec√ß√£o facial
- `VerificationResult` - Resultado da verifica√ß√£o biom√©trica

### üîß Funcionamento

O m√≥dulo coordena todo o fluxo biom√©trico:

1. **Recebimento de Imagem**: Aceita imagens em m√∫ltiplos formatos (base64, bytes, caminho)
2. **Pr√©-processamento**: Ajusta qualidade, redimensiona e normaliza
3. **An√°lise Facial**: Detecta faces e extrai caracter√≠sticas
4. **Verifica√ß√£o**: Compara com refer√™ncia ou base de dados
5. **Resultado**: Retorna score de confian√ßa e metadados

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.biometrics import BiometricService, VerificationResult

# Inicializar servi√ßo biom√©trico
biometric_service = BiometricService()

# Carregar imagem de refer√™ncia
with open("reference_face.jpg", "rb") as f:
    reference_image = f.read()

# Carregar imagem para verificar
with open("unknown_face.jpg", "rb") as f:
    unknown_image = f.read()

# Realizar verifica√ß√£o facial
result: VerificationResult = biometric_service.verify_faces(
    reference_image=reference_image,
    unknown_image=unknown_image,
    threshold=0.75  # Limite de confian√ßa
)

print(f"Similaridade: {result.confidence:.2f}")
print(f"Verificado: {result.is_verified}")
```

### ‚ö†Ô∏è Observa√ß√µes

- **Multi-formato**: Suporte a JPEG, PNG, WebP e outros formatos
- **Otimizado**: Balanceamento entre precis√£o e performance
- **Extens√≠vel**: F√°cil integra√ß√£o com novos provedores
- **Detalhado**: Metadados ricos para an√°lise posterior

---

## üîí Crypto.py

### üéØ Finalidade
Fornecer servi√ßos criptogr√°ficos seguros para o EyeOfToga SDK, incluindo criptografia de dados sens√≠veis, gera√ß√£o de hashes, assinaturas digitais e gerenciamento de chaves.

### üì¶ Depend√™ncias
- `cryptography` - Para opera√ß√µes criptogr√°ficas primitivas
- `hashlib` - Para fun√ß√µes de hash criptogr√°ficas
- `secrets` - Para gera√ß√£o de n√∫meros aleat√≥rios seguros
- `base64` - Para codifica√ß√£o/decodifica√ß√£o segura
- `logging` - Para auditoria de opera√ß√µes criptogr√°ficas

### üß© Principais Componentes

**Classes Principais:**
- `CryptoService` - Servi√ßo principal de criptografia
- `KeyManager` - Gerenciador de chaves criptogr√°ficas
- `HashService` - Servi√ßo de gera√ß√£o de hashes

**Algoritmos Suportados:**
- Criptografia: AES-256-GCM, ChaCha20-Poly1305
- Hash: SHA-256, SHA-512, BLAKE2b
- Assinatura: ECDSA, Ed25519

### üîß Funcionamento

O m√≥dulo oferece opera√ß√µes criptogr√°ficas completas:

1. **Criptografia Sim√©trica**: Dados sens√≠veis com chaves AES
2. **Hashing Seguro**: Hashes com salt para armazenamento seguro
3. **Assinatura Digital**: Verifica√ß√£o de integridade e autenticidade
4. **Gera√ß√£o de Chaves**: Cria√ß√£o segura de chaves criptogr√°ficas

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.crypto import CryptoService

# Inicializar servi√ßo criptogr√°fico
crypto_service = CryptoService()

# Dados sens√≠veis para criptografar
sensitive_data = "dados super secretos"
key = crypto_service.generate_key()  # Gera chave AES-256

# Criptografar dados
encrypted_data, nonce, tag = crypto_service.encrypt(
    plaintext=sensitive_data.encode(),
    key=key
)

print(f"Dados criptografados: {encrypted_data.hex()}")

# Descriptografar dados
decrypted_data = crypto_service.decrypt(
    ciphertext=encrypted_data,
    key=key,
    nonce=nonce,
    tag=tag
)

print(f"Dados originais: {decrypted_data.decode()}")
```

### ‚ö†Ô∏è Observa√ß√µes

- **Audit√°vel**: Todas as opera√ß√µes s√£o registradas em log
- **Secure by Default**: Configura√ß√µes seguras como padr√£o
- **Performance**: Otimizado para opera√ß√µes em lote
- **Compliance**: Conformidade com padr√µes de seguran√ßa

---

## üîó Dependencies.py

### üéØ Finalidade
Gerenciar inje√ß√£o de depend√™ncias e configura√ß√£o do EyeOfToga SDK, proporcionando inicializa√ß√£o lazy, caching de inst√¢ncias e resolu√ß√£o autom√°tica de depend√™ncias.

### üì¶ Depend√™ncias
- `injector` - Para inje√ß√£o de depend√™ncias avan√ßada
- `typing` - Para type hints e defini√ß√£o de tipos
- `logging` - Para debug de resolu√ß√£o de depend√™ncias
- `functools` - Para decorators e caching

### üß© Principais Componentes

**Classes Principais:**
- `DependencyContainer` - Container principal de DI
- `ServiceLocator` - Localizador de servi√ßos registrados
- `ConfigProvider` - Provedor de configura√ß√£o centralizada

**Padr√µes Implementados:**
- Singleton: Inst√¢ncias √∫nicas por classe
- Factory: Cria√ß√£o sob demanda de servi√ßos
- Lazy: Inicializa√ß√£o apenas quando necess√°rio

### üîß Funcionamento

O sistema de depend√™ncias opera em tr√™s fases:

1. **Registro**: Servi√ßos s√£o registrados no container
2. **Resolu√ß√£o**: Depend√™ncias s√£o resolvidas automaticamente
3. **Inje√ß√£o**: Inst√¢ncias s√£o injetadas nos consumidores

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.dependencies import DependencyContainer
from eyeoftoga_sdk.biometrics import BiometricService
from eyeoftoga_sdk.auth import AuthManager

# Configurar container de depend√™ncias
container = DependencyContainer()

# Registrar servi√ßos
container.register_singleton(BiometricService)
container.register_singleton(AuthManager)

# Resolver depend√™ncias (inje√ß√£o autom√°tica)
biometric_service = container.resolve(BiometricService)
auth_manager = container.resolve(AuthManager)

# Usar servi√ßos injetados
result = biometric_service.verify_faces(...)
```

### ‚ö†Ô∏è Observa√ß√µes

- **Thread-Safe**: Adequado para ambientes concorrentes
- **Extens√≠vel**: F√°cil adi√ß√£o de novos servi√ßos
- **Debug√°vel**: Logs detalhados de resolu√ß√£o
- **Performance**: Cache de inst√¢ncias para melhor performance

---

## üõ°Ô∏è Middleware.py

### üéØ Finalidade
Fornecer middlewares comuns para frameworks web, incluindo autentica√ß√£o, logging, tratamento de erros e m√©tricas de performance para integra√ß√£o transparente do EyeOfToga SDK.

### üì¶ Depend√™ncias
- `time` - Para medi√ß√£o de tempo e performance
- `logging` - Para registro structured logging
- `functools` - Para decorators de middleware
- `typing` - Para type hints e defini√ß√£o de tipos

### üß© Principais Componentes

**Middlewares Principais:**
- `AuthMiddleware` - Middleware de autentica√ß√£o JWT
- `LoggingMiddleware` - Middleware de logging estruturado
- `ErrorHandlingMiddleware` - Middleware de tratamento de erros
- `MetricsMiddleware` - Middleware de coleta de m√©tricas

**Compatibilidade:**
- FastAPI: Decorators e dependencies
- Flask: Blueprints e before/after request
- Django: Middleware classes

### üîß Funcionamento

Cada middleware executa em uma fase espec√≠fica do request:

1. **Before Request**: Autentica√ß√£o, valida√ß√£o, logging
2. **During Request**: Processamento principal
3. **After Request**: Logging, m√©tricas, limpeza
4. **Error Handling**: Tratamento consistente de erros

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.middleware import AuthMiddleware, LoggingMiddleware
from fastapi import FastAPI

app = FastAPI()

# Adicionar middlewares
app.add_middleware(AuthMiddleware)
app.add_middleware(LoggingMiddleware)

@app.get("/protected")
async def protected_route():
    # Rota automaticamente protegida por autentica√ß√£o
    return {"message": "Acesso permitido"}
```

### ‚ö†Ô∏è Observa√ß√µes

- **Framework Agnostic**: Funciona com FastAPI, Flask, Django
- **Configur√°vel**: Comportamento personaliz√°vel por configura√ß√£o
- **Performance**: Baixo overhead nas opera√ß√µes
- **Extens√≠vel**: F√°cil cria√ß√£o de novos middlewares

---

## üê≥ Dockerfile

### üéØ Finalidade
Fornecer containeriza√ß√£o consistente e otimizada para o EyeOfToga SDK, garantindo ambiente reproduz√≠vel, depend√™ncias controladas e deployment simplificado.

### üì¶ Depend√™ncias
- Python 3.9+ - Vers√£o base do runtime
- Build essentials - Para compila√ß√£o de depend√™ncias
- Security updates - Pacotes atualizados para seguran√ßa

### üß© Est√°gios de Build

**Multi-stage build para otimiza√ß√£o:**
1. **Builder Stage**: Compila√ß√£o de depend√™ncias e assets
2. **Runtime Stage**: Imagem final minimalista e segura

### üîß Funcionamento

O Dockerfile implementa pr√°ticas recomendadas:

1. **Layer Caching**: Ordena√ß√£o inteligente para cache eficiente
2. **Security Hardening**: Usu√°rio n√£o-root, permiss√µes restritas
3. **Size Optimization**: Multi-stage build para imagem minimalista
4. **Healthchecks**: Verifica√ß√£o autom√°tica de sa√∫de do container

### üìä Exemplo de Uso

```bash
# Build da imagem
docker build -t eyeoftoga-sdk .

# Executar container
docker run -p 8000:8000 \
  -e ENVIRONMENT=production \
  -v ./config:/app/config \
  eyeoftoga-sdk
```

### ‚ö†Ô∏è Observa√ß√µes

- **Security**: Sem root privileges, packages atualizados
- **Performance**: Otimizado para cold start r√°pido
- **Production Ready**: Configura√ß√µes adequadas para produ√ß√£o
- **Extens√≠vel**: F√°cil adapta√ß√£o para diferentes ambientes

---

## üìã Requirements.txt

### üéØ Finalidade
Gerenciar depend√™ncias Python do EyeOfToga SDK com versionamento preciso, garantindo consist√™ncia entre ambientes de desenvolvimento, teste e produ√ß√£o.

### üì¶ Categorias de Depend√™ncias

**Core:**
- fastapi>=0.68.0 - Framework web async
- numpy>=1.21.0 - Computa√ß√£o num√©rica
- pillow>=8.3.0 - Processamento de imagem

**Security:**
- cryptography>=3.4.0 - Criptografia
- python-jose>=3.3.0 - JWT tokens

**Utils:**
- pydantic>=1.8.0 - Valida√ß√£o de dados
- loguru>=0.5.0 - Logging estruturado

### üîß Gerenciamento de Vers√µes

- **Versionamento Pinned**: Vers√µes exatas para produ√ß√£o
- **Range Testing**: ranges para desenvolvimento
- **Security Scanning**: Depend√™ncias verificadas por vulnerabilidades

### üìä Exemplo de Conte√∫do

```txt
# Core dependencies
fastapi==0.68.0
uvicorn==0.15.0

# Security
cryptography==3.4.8
python-jose==3.3.0

# Image processing
numpy==1.21.0
pillow==8.3.0

# Utilities
pydantic==1.8.2
loguru==0.5.0
```

### ‚ö†Ô∏è Observa√ß√µes

- **Reprodutibilidade**: Builds consistentes em qualquer ambiente
- **Security**: An√°lise regular de vulnerabilidades
- **Manuten√ß√£o**: Atualiza√ß√µes regulares de depend√™ncias
- **Compatibilidade**: Testes de compatibilidade entre vers√µes

## üîç AWS Rekognition Provider

### üéØ Finalidade
Integra√ß√£o com o Amazon Rekognition para servi√ßos de an√°lise facial, proporcionando reconhecimento facial em escala empresarial com alta precis√£o e baixa lat√™ncia atrav√©s de APIs gerenciadas pela AWS.

### üì¶ Depend√™ncias
- `boto3` - SDK oficial da AWS para Python
- `botocore` - Biblioteca core do AWS SDK
- `logging` - Para logging estruturado de opera√ß√µes
- `time` - Para medi√ß√£o de performance e timeouts
- `base64` - Para codifica√ß√£o/decodifica√ß√£o de imagens
- `json` - Para serializa√ß√£o de respostas da AWS

### üß© Principais Componentes

**Classes Principais:**
- `AWSRekognitionProvider` - Implementa√ß√£o do provedor AWS
- `RekognitionConfig` - Configura√ß√£o espec√≠fica do AWS Rekognition
- `RekognitionResponse` - Modelo de resposta padronizado

**M√©todos Principais:**
- `compare_faces()` - Compara duas imagens faciais
- `detect_faces()` - Detecta faces em uma imagem
- `search_faces()` - Busca faces em cole√ß√£o (face matching)
- `index_face()` - Indexa face em cole√ß√£o para busca futura

### üîß Funcionamento

O provedor implementa a interface `BiometricProvider` com:

1. **Autentica√ß√£o AWS**: Configura√ß√£o de credenciais via IAM
2. **Chamadas API**: Comunica√ß√£o com endpoints do Rekognition
3. **Processamento**: An√°lise de imagens e extra√ß√£o de features
4. **Normaliza√ß√£o**: Adapta√ß√£o de respostas AWS para formato padr√£o

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.biometrics.providers.aws_rekognition import AWSRekognitionProvider

# Configurar provedor AWS
aws_config = {
    'region_name': 'us-east-1',
    'aws_access_key_id': 'your-access-key',
    'aws_secret_access_key': 'your-secret-key',
    'collection_id': 'eyeoftoga-faces'
}

provider = AWSRekognitionProvider(aws_config)

# Comparar duas faces
with open("face1.jpg", "rb") as f1, open("face2.jpg", "rb") as f2:
    result = provider.compare_faces(f1.read(), f2.read())
    
print(f"Similaridade: {result['similarity']:.2f}")
print(f"Confian√ßa: {result['confidence']:.2f}")

# Resultado esperado:
# Similaridade: 0.92
# Confian√ßa: 99.8
```

### ‚ö†Ô∏è Observa√ß√µes

- **Custos AWS**: Utiliza Amazon Rekognition (cobran√ßa por uso)
- **Lat√™ncia**: Depende da regi√£o AWS e qualidade de rede
- **Limites**: Respeita limites de API da AWS (TPS)
- **Disponibilidade**: Sujeito ao SLA da AWS (99.9% uptime)

---

## üß™ Mock Provider

### üéØ Finalidade
Provedor simulado para desenvolvimento, testes e ambientes de staging que n√£o requerem integra√ß√£o com servi√ßos reais de biometria, proporcionando comportamento previs√≠vel e configur√°vel.

### üì¶ Depend√™ncias
- `random` - Para gera√ß√£o de valores aleat√≥rios controlados
- `time` - Para simula√ß√£o de lat√™ncia de rede
- `logging` - Para debug de opera√ß√µes simuladas
- `unittest.mock` - Para cria√ß√£o de objetos mock (opcional)

### üß© Principais Componentes

**Classes Principais:**
- `MockBiometricProvider` - Implementa√ß√£o do provedor mock
- `MockConfig` - Configura√ß√£o do comportamento simulado
- `MockResponse` - Respostas predefinidas para testes

**Comportamentos Simulados:**
- ‚úÖ Sucesso com similaridade configur√°vel
- ‚ùå Falhas controladas (erros de rede, timeout)
- ‚è±Ô∏è Lat√™ncia artificial para testes de performance
- üìä Dados consistentes para testes repet√≠veis

### üîß Funcionamento

O provedor mock oferece v√°rias estrat√©gias de simula√ß√£o:

1. **Modo Determin√≠stico**: Sempre retorna mesmo resultado
2. **Modo Aleat√≥rio**: Gera resultados dentro de ranges configur√°veis
3. **Modo Sequencial**: Ciclo atrav√©s de respostas predefinidas
4. **Modo Erro**: Simula falhas espec√≠ficas sob demanda

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.biometrics.providers.mock_provider import MockBiometricProvider

# Configurar provedor mock para testes
mock_config = {
    'mode': 'deterministic',
    'fixed_similarity': 0.85,
    'fixed_confidence': 0.95,
    'simulate_latency': True,
    'min_latency_ms': 100,
    'max_latency_ms': 500
}

provider = MockBiometricProvider(mock_config)

# Teste com resultado previs√≠vel
result = provider.compare_faces(b"fake_image_1", b"fake_image_2")
print(f"Similaridade: {result['similarity']}")  # Sempre 0.85
print(f"Confian√ßa: {result['confidence']}")     # Sempre 0.95

# Teste com modo aleat√≥rio
random_config = {
    'mode': 'random',
    'min_similarity': 0.1,
    'max_similarity': 0.99,
    'error_rate': 0.1  # 10% de chance de erro
}

random_provider = MockBiometricProvider(random_config)
```

### ‚ö†Ô∏è Observa√ß√µes

- **Desenvolvimento**: Ideal para desenvolvimento sem depend√™ncias externas
- **Testes**: Permite testes unit√°rios isolados e consistentes
- **Performance**: Sem lat√™ncia real de rede ou processamento
- **Limita√ß√µes**: N√£o oferece valida√ß√£o real de algoritmos biom√©tricos

---

## üíª Local Face Recognition Provider

### üéØ Finalidade
Provedor de reconhecimento facial local utilizando bibliotecas open-source, proporcionando funcionalidade biom√©trica offline sem depend√™ncia de servi√ßos cloud ou APIs externas.

### üì¶ Depend√™ncias
- `face_recognition` - Biblioteca base para reconhecimento facial
- `dlib` - Dependency principal para machine learning
- `numpy` - Para opera√ß√µes matriciais e manipula√ß√£o de embeddings
- `cv2` (OpenCV) - Para processamento de imagem avan√ßado
- `PIL` - Para manipula√ß√£o b√°sica de imagens

### üß© Principais Componentes

**Classes Principais:**
- `LocalFaceRecognitionProvider` - Implementa√ß√£o local
- `FaceEncoding` - Representa√ß√£o num√©rica de caracter√≠sticas faciais
- `LocalRecognitionConfig` - Configura√ß√£o para processamento local

**Funcionalidades:**
- `extract_face_encodings()` - Extrai embeddings faciais
- `calculate_face_distance()` - Calcula dist√¢ncia entre embeddings
- `detect_face_locations()` - Detecta coordenadas de faces na imagem
- `compare_face_encodings()` - Compara m√∫ltiplos encodings

### üîß Funcionamento

O provedor local opera completamente offline:

1. **Detec√ß√£o Facial**: Identifica rostos usando HOG + SVM
2. **Extra√ß√£o de Features**: Gera embeddings de 128 dimens√µes
3. **Compara√ß√£o**: Calcula dist√¢ncia euclidiana entre embeddings
4. **Decis√£o**: Aplica threshold para verifica√ß√£o

### üìä Exemplo de Uso

```python
from eyeoftoga_sdk.biometrics.providers.local_face_recognition import LocalFaceRecognitionProvider

# Configurar provedor local
local_config = {
    'model': 'hog',  # ou 'cnn' para melhor precis√£o (mais lento)
    'number_of_times_to_upsample': 1,
    'tolerance': 0.6,  # Threshold para matching
    'gpu_acceleration': False  # Usar GPU se dispon√≠vel
}

provider = LocalFaceRecognitionProvider(local_config)

# Carregar e comparar imagens
image_1 = load_image("person_1.jpg")
image_2 = load_image("person_2.jpg")

result = provider.compare_faces(image_1, image_2)

if result['match']:
    print(f"Faces correspondem! Similaridade: {result['similarity']:.2f}")
else:
    print("Faces n√£o correspondem")
```

### ‚ö†Ô∏è Observa√ß√µes

- **Offline**: Funciona completamente sem internet
- **Privacidade**: Dados nunca saem do dispositivo/local
- **Performance**: Consome mais CPU que solu√ß√µes cloud
- **Precis√£o**: Alta precis√£o mas depende da qualidade das imagens
- **Recursos**: Requer mais mem√≥ria RAM que provedores cloud

---

## üìä Compara√ß√£o entre Provedores

| Caracter√≠stica | AWS Rekognition | Local Recognition | Mock Provider |
|----------------|-----------------|-------------------|---------------|
| **Precis√£o** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (99.9%) | ‚≠ê‚≠ê‚≠ê‚≠ê (95-98%) | ‚≠ê (Configur√°vel) |
| **Lat√™ncia** | ‚≠ê‚≠ê‚≠ê‚≠ê (200-500ms) | ‚≠ê‚≠ê‚≠ê (500-2000ms) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (0-100ms) |
| **Custo** | $$$ (Por uso) | $ (Hardware) | $ (Zero) |
| **Privacidade** | ‚≠ê‚≠ê (Dados na AWS) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Local) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Local) |
| **Offline** | ‚ùå | ‚úÖ | ‚úÖ |
| **Escalabilidade** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Auto-scale) | ‚≠ê‚≠ê (Limitado local) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Ilimitado) |
| **Facilidade** | ‚≠ê‚≠ê‚≠ê‚≠ê (API simples) | ‚≠ê‚≠ê (Complexo setup) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Muito f√°cil) |

---

## üîÑ Estrat√©gia de Fallback

O EyeOfToga SDK implementa fallback autom√°tico entre provedores:

```python
# Estrat√©gia de tentativa em ordem de prefer√™ncia
providers = [
    AWSRekognitionProvider(aws_config),
    LocalFaceRecognitionProvider(local_config),
    MockBiometricProvider(mock_config)  # Fallback final
]

for provider in providers:
    try:
        result = provider.compare_faces(image1, image2)
        break  # Sucesso, sair do loop
    except Exception as e:
        print(f"Provedor {type(provider).__name__} falhou: {e}")
        continue # Tentar pr√≥ximo provedor
```
